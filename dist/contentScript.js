(()=>{const e=new Set;new MutationObserver(()=>{document.querySelectorAll("tr.zA.zE").forEach(t=>{const r=function(e){const t=e.querySelector(".bog"),r=e.querySelector(".y2");return t&&r?{id:e.dataset.threadId||t.innerText,subject:t.innerText.trim(),preview:r.innerText.trim()}:null}(t);r&&!e.has(r.id)&&(e.add(r.id),function(e){chrome.runtime.sendMessage({type:"NEW_EMAIL",payload:{subject:e.subject,preview:e.preview}},e=>{console.log("Background resp:",e)})}(r))})}).observe(document.body,{childList:!0,subtree:!0})})();